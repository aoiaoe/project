server:
  port: 10000
spring:
  application:
    name: nacos-config-sentinel-user
  cloud:
    sentinel:
      enabled: true
      transport:
        # 暂时不能使用云上的sentinel, 因为云上的不能访问本地服务获取信息
        dashboard: http://localhost:9999 # sentinel看板的地址
      eager: true # 开启对sentinel看板的饥饿式加载。sentinel默认是懒加载机制，只有访问过一次的资源才会被监控，通过关闭懒加载，在项目启动时就连接sentinel控制台
    nacos:
      discovery:
        service: ${spring.application.name}
        server-addr: http://tx-gd:8948
        username: nacos
        password: nacos
        register-enabled: true # 是否注册，消费者一般不需要注册
        namespace: dev # 命名空间
        instance-enabled: true
      config:
        enabled: true
        server-addr: http://tx-gd:8948
        username: nacos
        password: nacos
        file-extension: yml
        group: DEFAULT_GROUP
        namespace: dev
        # 主配置 > 扩展配置(extension-configs) > 共享配置(shared-configs)
        # 扩展配置
        extension-configs[0]:
          dataId: nacos-config-sentinel-user-ext.yml
        # 共享配置
        shared-configs[0]:
          dataId: common.yml
    stream:
#      binders: # 在此处配置要绑定的rabbitmq的服务信息；
#        defaultRabbit: # 表示定义的名称，用于于binding整合
#          type: rabbit # 消息组件类型
#          environment: # 设置rabbitmq的相关的环境配置
#            spring:
#              rabbitmq:
#                host: tx-sh
#                port: 5672
#                username: admin
#                password: admin
      function:
        definition: userVoMessageListener
      bindings:
        userVoMessageListener-in-0:
          destination: userVoMessage
          group: hah
          consumer:
            concurrency: 3
#            partitioned: true
            # 分区
#          producer:
#            partitionKeyExpression: payload.id
#            partitionCount: 3
#        userVoMessageListener-in-1:
#          destination: userVoMessage
#          group: hah
#      instance-count: 3
#      instance-index-list:
#        - 0
#        - 1
#        - 2
  rabbitmq:
   addresses: tx-sh
   port: 5672
   username: admin
   password: admin
   
feign:
  # 是否开启gzip压缩
  compression:
    request:
      enabled: true
      mime-types: text/xml,application/xml,application/json
      min-request-size: 1024
    response:
      enabled: true
  # 底层切换为OkHttp
  httpclient:
    enabled: false
  okhttp:
    enabled: true



# 暴露端点
management:
  endpoints:
    web:
      exposure:
        # 默认值开放health和info端点。设置*开放所有端点
        include: '*'
  endpoint:
    health:
      show-details: always

#nacos-config:
#  test: value in bootstrap
resttemplate:
  sentinel:
    enabled: true
